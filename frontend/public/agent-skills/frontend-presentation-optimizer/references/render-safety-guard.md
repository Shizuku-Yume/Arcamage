# render-safety-guard

最终输出前的安全与可读性检查清单。

## Preflight Checklist

- [ ] 宏变量完整保留（如 `{{user}}`、`{{char}}`）。
- [ ] HTML 标签闭合完整，无错位嵌套。
- [ ] 样式类命名局部化（建议 `rp-*` 或 `fx-*` 前缀）。
- [ ] 没有依赖外链脚本/字体/CDN。
- [ ] 没有危险脚本模式（`eval`、动态代码执行）。
- [ ] 动效不过量，信息密度优先于装饰密度。
- [ ] 去掉无意义空容器与重复样式。

## Compatibility Fallback

如果无法确认渲染环境是否支持 HTML/CSS/JS：

1. 输出 HTML 版本（完整视觉效果）。
2. 紧接着输出纯文本版本（保留相同信息结构）。
3. 标注“纯文本回退版”便于用户直接替换。

## Failure Modes to Avoid

- 视觉很炫但剧情无推进。
- 结构模板过重导致每轮回复冗长。
- 为了效果修改角色设定或世界观事实。
- 在同一回复中叠加多个复杂动画。
